webpackJsonp([27],{AoBY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mw3O"),r=a.n(s),l=a("OMN4"),i=a.n(l),o={name:"equipmentList",data:function(){return{activeIndex:"1",actives:1,textarea:"",universal:{change:!1,bstop:!1},paging:{page:1,pageSize:10,total:0},tableData:[],search:{reName:"",phone:"",starDate:"",endDate:"",repType:"",repSource:""},details:{repName:"",repPhone:"",repOpin:"",repDate:"",repSendDate:"",repSolveDate:""},problem:{userType:"",repRepairName:"",repSolveDate:"",phoneNum:"",repId:""},options:[]}},mounted:function(){document.title=this.$route.meta.title,this.searchClick()},methods:{handleSelect:function(e,t){this.activeIndex=e},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},changeShow:function(e){var t=this;this.universal.change=!0,this.problem.userType=e.userType,this.problem.repId=e.repId,i()({method:"post",url:this.$store.state.http+"/repair/selectByProblemId",data:r.a.stringify({repId:e.repId})}).then(function(e){0==e.data.resCode&&(t.activeIndex="1",t.details=e.data.result,t.problem.repRepairName=e.data.result.repRepairName,t.problem.phoneNum=e.data.result.repRepairPhone,t.problem.repSolveDate=e.data.result.repSolveDate,t.actives=parseInt(e.data.result.repType,10)+1,3==t.actives||2==t.actives?t.universal.bstop=!0:t.universal.bstop=!1,t.downList(t.problem.userType))})},changeClick:function(e){if(e)for(var t=0;t<this.options.length;t++)this.options[t].userId==e&&(this.problem.phoneNum=this.options[t].phoneNum);else this.problem.phoneNum=""},distribution:function(){if(""==this.problem.repRepairName)return this.$message.error("请选择维修人员"),!1;var e=this.problem,t=this;e.repType=1,i()({method:"post",url:this.$store.state.http+"/repair/updaByProblemId",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode&&(t.searchClick(),t.$message({message:"分配成功",type:"success"}),t.universal.change=!1)})},unDistribution:function(){var e=this.problem,t=this;e.repType=0,e.phoneNum="",e.repRepairName="",e.repSolveDate="",i()({method:"post",url:this.$store.state.http+"/repair/updaByProblemId",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode&&(t.searchClick(),t.$message({message:"分配成功",type:"success"}),t.universal.change=!1)})},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize};this.search.reName&&(e.reName=this.search.reName),this.search.phone&&(e.phone=this.search.phone),this.search.starDate&&(e.starDate=this.search.starDate),this.search.endDate&&(e.endDate=this.search.endDate),this.search.repType&&(e.repType=this.search.repType),this.search.repSource&&(e.repSource=this.search.repSource);var t=this;t.tableData=[],i()({method:"post",url:this.$store.state.http+"/repair/selectProblemList",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.paging.total=e.data.count,t.tableData=e.data.result):t.tableData=[]})},downList:function(e){var t=this;i()({method:"post",url:this.$store.state.http+"/repair/selByUserProblemId",data:r.a.stringify({userType:e})}).then(function(e){0==e.data.resCode&&(t.options=e.data.result)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"proProcess"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("用户昵称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.reName,callback:function(t){e.$set(e.search,"reName",t)},expression:"search.reName"}}),e._v(" "),a("span",[e._v("联系方式：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.phone,callback:function(t){e.$set(e.search,"phone",t)},expression:"search.phone"}}),e._v(" "),a("span",[e._v("报修来源：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.repSource,callback:function(t){e.$set(e.search,"repSource",t)},expression:"search.repSource"}},[a("el-option",{key:"",attrs:{label:"未选择",value:""}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"平台",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"微信",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("开始时间：")]),e._v(" "),a("el-date-picker",{staticClass:"oyInp",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.search.starDate,callback:function(t){e.$set(e.search,"starDate",t)},expression:"search.starDate"}}),e._v(" "),a("span",[e._v("结束时间：")]),e._v(" "),a("el-date-picker",{staticClass:"oyInp",attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.search.endDate,callback:function(t){e.$set(e.search,"endDate",t)},expression:"search.endDate"}}),e._v(" "),a("span",[e._v("处理状态：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.search.repType,callback:function(t){e.$set(e.search,"repType",t)},expression:"search.repType"}},[a("el-option",{key:"",attrs:{label:"未选择",value:""}}),e._v(" "),a("el-option",{key:"0",attrs:{label:"未处理",value:"0"}}),e._v(" "),a("el-option",{key:"1",attrs:{label:"正在处理",value:"1"}}),e._v(" "),a("el-option",{key:"2",attrs:{label:"处理完成",value:"2"}})],1)],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户昵称",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系方式",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repPhone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repPhone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"经销商名称",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.userType))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.userType))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{},[e._v(e._s(t.row.repTypeCode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repTypeCode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"故障编号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repFauCode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repFauCode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报修时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repRepairDate))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repRepairDate))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"处理状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[0==t.row.repType?a("p",{staticClass:"TsMaxWidth"},[e._v("未处理")]):e._e(),e._v(" "),1==t.row.repType?a("p",{staticClass:"TsMaxWidth"},[e._v("正在处理")]):e._e(),e._v(" "),2==t.row.repType?a("p",{staticClass:"TsMaxWidth"},[e._v("处理完成")]):e._e(),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[0==t.row.repType?a("div",{staticClass:"overflowHide"},[e._v("未处理")]):e._e(),e._v(" "),1==t.row.repType?a("div",{staticClass:"overflowHide"},[e._v("正在处理")]):e._e(),e._v(" "),2==t.row.repType?a("div",{staticClass:"overflowHide"},[e._v("处理完成")]):e._e()])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报修来源",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(1==t.row.repSource?"平台":"微信"))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(1==t.row.repSource?"平台":"微信"))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看详情",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-search",on:{click:function(a){e.changeShow(t.row)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看详情",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",{staticClass:"oyDialogWidth"},[a("el-steps",{attrs:{active:e.actives,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"待处理"}}),e._v(" "),a("el-step",{attrs:{title:"正在处理"}}),e._v(" "),a("el-step",{attrs:{title:"处理完成"}})],1)],1),e._v(" "),a("el-menu",{staticClass:"oyMenu",attrs:{"default-active":e.activeIndex,mode:"horizontal","background-color":"#999999","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[a("el-menu-item",{staticClass:"oyMenu",attrs:{index:"1"}},[e._v("报修详情")]),e._v(" "),a("el-menu-item",{staticClass:"oyMenu",attrs:{index:"2"}},[e._v("处理详情")]),e._v(" "),3==e.actives?a("el-menu-item",{staticClass:"oyMenu",attrs:{index:"3"}},[e._v("电话回访")]):e._e()],1),e._v(" "),"1"==e.activeIndex?a("div",[a("br"),a("span",{staticClass:"oySpanName"},[e._v("用户名")]),a("span",[e._v(e._s(e.details.repName))]),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"oySpanName"},[e._v("手机号")]),a("span",[e._v(e._s(e.details.repPhone))]),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"oySpanName"},[e._v("报修内容")]),a("span",[e._v(e._s(e.details.repOpin))]),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"oySpanName"},[e._v("报修时间")]),a("span",[e._v(e._s(e.details.repDate))]),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"oySpanName"},[e._v("派出时间")]),a("span",[e._v(e._s(e.details.repSendDate))]),a("br"),a("br"),a("br"),e._v(" "),a("span",{staticClass:"oySpanName"},[e._v("解决时间")]),a("span",[e._v(e._s(e.details.repSolveDate))]),a("br")]):e._e(),e._v(" "),"2"==e.activeIndex?a("div",[a("br"),a("span",{staticClass:"spanClassT"},[e._v("经销商：")]),e._v(" "),a("el-input",{attrs:{disabled:e.universal.bstop,clearable:"",placeholder:"请输入内容"},model:{value:e.problem.userType,callback:function(t){e.$set(e.problem,"userType",t)},expression:"problem.userType"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("维修人员：")]),e._v(" "),a("el-select",{attrs:{disabled:e.universal.bstop,placeholder:"请选择"},on:{change:e.changeClick},model:{value:e.problem.repRepairName,callback:function(t){e.$set(e.problem,"repRepairName",t)},expression:"problem.repRepairName"}},[a("el-option",{key:"",attrs:{label:"未选择",value:""}}),e._v(" "),e._l(e.options,function(e){return a("el-option",{key:e.userId,attrs:{label:e.userAlias,value:e.userId}})})],2),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("联系电话：")]),e._v(" "),a("el-input",{attrs:{disabled:e.universal.bstop,clearable:"",placeholder:"请输入内容"},model:{value:e.problem.phoneNum,callback:function(t){e.$set(e.problem,"phoneNum",t)},expression:"problem.phoneNum"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("处理日期：")]),e._v(" "),a("el-date-picker",{staticClass:"oyInp",attrs:{disabled:e.universal.bstop,type:"datetime",placeholder:"选择日期时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.problem.repSolveDate,callback:function(t){e.$set(e.problem,"repSolveDate",t)},expression:"problem.repSolveDate"}}),a("br")],1):e._e(),e._v(" "),"3"==e.activeIndex?a("div",[a("span",{staticClass:"spanClassT",staticStyle:{"margin-top":"70px"}},[e._v("电话回访：")]),e._v(" "),a("el-input",{staticStyle:{width:"240px","margin-top":"30px"},attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["2"==e.activeIndex&&1==e.actives?a("el-button",{attrs:{type:"success"},on:{click:e.distribution}},[e._v("任务分配")]):e._e(),e._v(" "),"2"==e.activeIndex&&2==e.actives?a("el-button",{attrs:{type:"info"}},[e._v("任务已分配,处理中")]):e._e(),e._v(" "),"2"==e.activeIndex&&2==e.actives?a("el-button",{attrs:{type:"success"},on:{click:e.unDistribution}},[e._v("任务撤销")]):e._e(),e._v(" "),"2"==e.activeIndex&&3==e.actives?a("el-button",{attrs:{disabled:"",type:"info"}},[e._v("任务分配完成")]):e._e(),e._v(" "),"3"==e.activeIndex?a("el-button",{attrs:{type:"success"}},[e._v("回访")]):e._e()],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("角色列表")])])])}]};var p=a("VU/8")(o,n,!1,function(e){a("bOXQ")},"data-v-2b4a876b",null);t.default=p.exports},bOXQ:function(e,t){}});