webpackJsonp([21],{"7vqL":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),l=a.n(s),n=a("mw3O"),i=a.n(n),c=a("OMN4"),r=a.n(c),o={name:"equipmentList",data:function(){var e;return e={listLoading:!1,levelList:[],level:"0",add1:{deviceId:"",devicename:""},added:"",send:{deviceId:"",title:"",timeOut:"",qos:""},change:{title:"",desc:"",tags:"",lon:"",lat:"",authInfo:"",deviceId:""},status:"",universal:{add:!1,change:!1,look:!1,send:!1},tableData:[],con:{id:"",protocol:"",create_time:"",auth_info:"",title:"",desc:"",tags:"",lon:"",lat:"",dataid:"",unit:"",unit_symbol:""},li:[],add:!1,topic:!1,conGroup:!1},l()(e,"change",!1),l()(e,"send",!1),l()(e,"see",!1),l()(e,"changeGroups",!1),l()(e,"changeGrouping",{changeGrouping:"",conId:""}),l()(e,"step",0),l()(e,"seeStep",1),l()(e,"paging",{page:1,pageSize:10,total:0}),l()(e,"search",{deviceId:"",title:"",start:"",end:""}),l()(e,"controNameL",[{label:"C1",value:1},{label:"C2",value:2},{label:"C3",value:3},{label:"B1",value:4},{label:"B2",value:5},{label:"A1",value:6},{label:"A2",value:7},{label:"A3",value:8}]),e},mounted:function(){this.searchClick(),document.title=this.$route.meta.title,"123"==sessionStorage.getItem("dealer")&&(this.added=1)},methods:{indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e},next:function(){var e=this;0==this.step?r()({method:"post",url:e.$store.state.http+"/concode/conByCarBrand",data:i.a.stringify({conLocaid:e.addTo.list.conLocaid,carBrand:e.addTo.list.carBrand})}).then(function(t){if(0!=t.data.resCode)return e.$message.error("此定位器ID不存在"),e.addTo.list.conLocaid="",!1;e.step++>3&&(e.step=0,e.add=!1)}):e.step++>3&&(e.step=0,e.add=!1)},nextSee:function(){this.seeStep++>1&&(this.seeStep=1)},handleCurrentChange:function(e){this.searchClick()},addClick:function(){if(""==this.add1.deviceId)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.deviceName)return this.$message.error("带*的数据不能为空哦！"),!1;var e=this,t=this.add1;t.personnel=sessionStorage.getItem("dealer"),0==t.dealer&&(t.dealer=sessionStorage.getItem("orderDealers")),r()({method:"post",dataType:"jsonp",url:this.$store.state.http+"/devices/addOrderDevice",data:i.a.stringify(t)}).then(function(t){localStorage.setItem("id",t.data.errMsg.split(":")[1]),0==t.data.resCode?(e.searchClick(),e.$message({message:"添加成功",type:"success"})):6==t.data.resCode&&e.$alert(t.data.result,"请勿重复添加",{confirmButtonText:"确定"})}),e.universal.add=!1},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将解绑平台账户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r()({method:"post",url:t.$store.state.http+"/devices/removeOrderDevice",data:i.a.stringify({devId:e.deviceId})}).then(function(e){0==e.data.resCode?(a.$message({message:"解绑成功",type:"success"}),a.searchClick()):a.$message({message:"解绑失败",type:"error"})})})},changeshow:function(e){this.universal.change=!0,this.change=e},order:function(e){this.universal.send=!0,this.send=e},searchClick:function(){var e={pageNum:this.paging.page,pageSize:this.paging.pageSize};e.deviceType=this.search.deviceType,e.dealer=this.search.dealer,e.userId=sessionStorage.getItem("userId"),e.dealer=sessionStorage.getItem("dealer"),0==e.dealer&&(e.dealer=sessionStorage.getItem("orderDealers"));var t=this;t.tableData=[],t.timeCrea=[],r()({method:"post",url:this.$store.state.http+"/devices/assignFind ",data:i.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.tableData=e.data.result,t.paging.total=e.data.count):(t.tableData=[],t.paging.total=0)})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"PSTlist"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.deviceId,callback:function(t){e.$set(e.search,"deviceId",t)},expression:"search.deviceId"}}),e._v(" "),a("span",[e._v("设备类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.deviceType,callback:function(t){e.$set(e.search,"deviceType",t)},expression:"search.deviceType"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.deviceId,callback:function(t){e.$set(e.add1,"deviceId",t)},expression:"add1.deviceId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.deviceName,callback:function(t){e.$set(e.add1,"deviceName",t)},expression:"add1.deviceName"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.deviceId,callback:function(t){e.$set(e.change,"deviceId",t)},expression:"change.deviceId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("流量卡卡号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.title,callback:function(t){e.$set(e.change,"title",t)},expression:"change.title"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.desc,callback:function(t){e.$set(e.change,"desc",t)},expression:"change.desc"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备型号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.tags,callback:function(t){e.$set(e.change,"tags",t)},expression:"change.tags"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("创建时间：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.authInfo,callback:function(t){e.$set(e.change,"authInfo",t)},expression:"change.authInfo"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.change=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.changeclick(e.change)}}},[e._v("修改")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"spanClassT"},[e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.id,callback:function(t){e.$set(e.con,"id",t)},expression:"con.id"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("接入协议：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.protocol,callback:function(t){e.$set(e.con,"protocol",t)},expression:"con.protocol"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("创建时间：")]),e._v(" "),a("el-input",{staticClass:"coied",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.create_time,callback:function(t){e.$set(e.con,"create_time",t)},expression:"con.create_time"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("鉴权信息：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.auth_info,callback:function(t){e.$set(e.con,"auth_info",t)},expression:"con.auth_info"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.title,callback:function(t){e.$set(e.con,"title",t)},expression:"con.title"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备描述：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.desc,callback:function(t){e.$set(e.con,"desc",t)},expression:"con.desc"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备标签：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.tags,callback:function(t){e.$set(e.con,"tags",t)},expression:"con.tags"}}),a("br"),a("br")],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"spanClassT"},[e._v("设备经度：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.lon,callback:function(t){e.$set(e.con,"lon",t)},expression:"con.lon"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备纬度：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.lat,callback:function(t){e.$set(e.con,"lat",t)},expression:"con.lat"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("数据流名称：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.dataid,callback:function(t){e.$set(e.con,"dataid",t)},expression:"con.dataid"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("单位：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.unit,callback:function(t){e.$set(e.con,"unit",t)},expression:"con.unit"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("单位符号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.con.unit_symbol,callback:function(t){e.$set(e.con,"unit_symbol",t)},expression:"con.unit_symbol"}}),a("br"),a("br"),e._v(" "),a("div",{staticClass:"spanClassT"},[e._v("设备在线状态：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}}),a("br"),a("br")],1)],1)],1)]),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceId))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"流量卡卡号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.trafficCard))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.trafficCard))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceType))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceType))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备型号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceModel))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceModel))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.createTime.time))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.createTime.time))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"水司名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.personnel))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.personnel))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"解绑",placement:"top"}},[a("i",{staticClass:"icon-menu el-icon-sort",on:{click:function(a){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("公司账户分配")])])])}]};var v=a("VU/8")(o,d,!1,function(e){a("c3xV")},"data-v-4c377356",null);t.default=v.exports},c3xV:function(e,t){}});