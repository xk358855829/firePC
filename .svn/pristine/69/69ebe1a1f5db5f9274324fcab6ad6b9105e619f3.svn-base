webpackJsonp([16],{GssJ:function(e,t){},"s+nL":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("woOf"),i=s.n(a),c=s("lHA8"),n=s.n(c),l=s("c/Tr"),r=s.n(l),o=s("mw3O"),h=s.n(o),u=s("OMN4"),d=s.n(u),p={name:"equipmentList",data:function(){return{checkbox:{checkedCities:[]},checked:!0,universal:{add:!1,change:!1,jurisdiction:!1,next:!1},paging:{page:1,pageSize:10,total:0},tableData:[],search:{userName:"",userAlias:""},change:{userId:"",userName:"",roleName:"",userAlias:"",phoneNum:"",emal:""},options:[],dataUniversal:this.$store.state.activeName,updataUserId:""}},mounted:function(){document.title=this.$route.meta.title,this.searchClick(),this.downList()},methods:{hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},updataClick:function(){var e=this;d()({method:"post",url:this.$store.state.http+"/user/update",data:h.a.stringify({permissions:this.checkbox.checkedCities.join(","),userId:this.updataUserId})}).then(function(t){0==t.data.resCode?e.$message({message:"保存成功",type:"success"}):e.$message({message:"保存失败",type:"error"})}),this.universal.jurisdiction=!1},handleCheckedCitiesChange:function(e){for(var t=e,s=this.$store.state.sideList,a=this.$store.state.activeName,i=0;i<t.length;i++)for(var c=0;c<s.length;c++)t[i]==s[c].menuId&&"0"!=s[c].menuAssociated&&this.checkbox.checkedCities.push(s[c].menuAssociated);for(var l=0;l<a.length;l++){for(var o=a[l].classA.menuId,h=0;h<t.length;h++)for(var u=0;u<a[l].classB.length;u++)a[l].classB[u].menuId==t[h]&&(o="");var d=this.checkbox.checkedCities.indexOf(o);d>-1&&this.checkbox.checkedCities.splice(d,1)}this.checkbox.checkedCities=r()(new n.a(this.checkbox.checkedCities))},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},addClick:function(){},deleteClick:function(e){var t=this,s=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d()({method:"post",url:t.$store.state.http+"/user/delete",data:h.a.stringify({userId:e.userId})}).then(function(e){0==e.data.resCode?s.searchClick():s.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeShow:function(e){this.universal.change=!0,this.change=i()({},e)},changeClick:function(){if(""==this.change.userId||""==this.change.userAlias||""==this.change.phoneNum||""==this.change.emal)return this.$message.error("带*的数据不能为空哦！"),!1;if(!new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$").test(this.change.emal))return this.$message.error("邮箱格式不正确"),!1;if(!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.change.phoneNum))return this.$message.error("手机号码格式有误"),!1;var e={userId:this.change.userId,userAlias:this.change.userAlias,phoneNum:this.change.phoneNum,email:this.change.emal},t=this;d()({method:"post",url:this.$store.state.http+"/user/update",data:h.a.stringify(e)}).then(function(e){0==e.data.resCode?t.searchClick():t.$message({message:"添加失败",type:"error"})}),t.universal.change=!1},jurisdictionShow:function(e){var t=this;this.updataUserId=e.userId,d()({method:"post",url:this.$store.state.http+"/user/selecByUserId",data:h.a.stringify({userId:e.userId})}).then(function(e){0==e.data.resCode?"暂时无权限分配"==e.data.result?t.checkbox.checkedCities=[]:t.checkbox.checkedCities=e.data.result.split(","):t.checkbox.checkedCities=[]}),this.universal.jurisdiction=!0},allClick:function(e){for(var t=this.checkbox.checkedCities.indexOf(e),s=void 0,a=0;a<this.$store.state.activeName.length;a++)this.$store.state.activeName[a].classA.menuId==e&&(s=this.$store.state.activeName[a]);if(t>-1)for(var i=0;i<s.classB.length;i++)this.checkbox.checkedCities.push(s.classB[i].menuId);else for(var c=0;c<s.classB.length;c++){var n=this.checkbox.checkedCities.indexOf(s.classB[c].menuId);n>-1&&this.checkbox.checkedCities.splice(n,1)}},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize,type:10};this.search.userName&&(e.userName=this.search.userName),this.search.userAlias&&(e.userAlias=this.search.userAlias),e.userId=sessionStorage.getItem("userId"),e.dealer=sessionStorage.getItem("dealer"),0==e.dealer&&(e.dealer=sessionStorage.getItem("orderDealers"));var t=this;t.tableData=[],d()({method:"post",url:this.$store.state.http+"/user/list",data:h.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.paging.total=e.data.count,t.tableData=e.data.result):t.tableData=[]})},downList:function(){var e=this;d()({method:"post",url:this.$store.state.http+"/role/findAll"}).then(function(t){0==t.data.resCode&&(e.options=t.data.result,e.options.shift())})}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"InstallManList"}},[e._m(0),e._v(" "),s("div",{staticClass:"select"},[s("span",[e._v("用户名：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.userAlias,callback:function(t){e.$set(e.search,"userAlias",t)},expression:"search.userAlias"}}),e._v(" "),s("span",[e._v("账号：")]),e._v(" "),s("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.userName,callback:function(t){e.$set(e.search,"userName",t)},expression:"search.userName"}})],1),e._v(" "),s("div",{staticClass:"select"},[s("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),s("div",{staticClass:"Content"},[s("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[s("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{label:"账号\t",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.userName))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.userName))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户名",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.userAlias))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.userAlias))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"绑定手机",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.phoneNum))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.phoneNum))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"绑定邮箱",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.emal))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.emal))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"用户类型",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-popover",{attrs:{trigger:"hover",placement:"top"}},[s("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.roleName))]),e._v(" "),s("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[s("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.roleName))])])])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[s("i",{staticClass:"icon-change el-icon-edit",on:{click:function(s){e.changeShow(t.row)}}})]),e._v(" "),1==t.row.type?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"权限",placement:"top"}},[s("i",{staticClass:"icon-unclick el-icon-menu"})]):s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"权限",placement:"top"}},[s("i",{staticClass:"icon-menu el-icon-menu",on:{click:function(s){e.jurisdictionShow(t.row)}}})]),e._v(" "),1==t.row.type?s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[s("i",{staticClass:"icon-unclick el-icon-delete"})]):s("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[s("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(s){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[s("div",[s("span",{staticClass:"spanClass"},[e._v("账号：")]),e._v(" "),s("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.userName,callback:function(t){e.$set(e.change,"userName",t)},expression:"change.userName"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[e._v("用户类型：")]),e._v(" "),s("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.roleName,callback:function(t){e.$set(e.change,"roleName",t)},expression:"change.roleName"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户名\t：")]),e._v(" "),s("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.change.userAlias,callback:function(t){e.$set(e.change,"userAlias",t)},expression:"change.userAlias"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("绑定手机：")]),e._v(" "),s("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.change.phoneNum,callback:function(t){e.$set(e.change,"phoneNum",t)},expression:"change.phoneNum"}}),s("br"),s("br"),e._v(" "),s("span",{staticClass:"spanClass"},[s("span",{staticClass:"aKey"},[e._v("*")]),e._v("绑定邮箱：")]),e._v(" "),s("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.change.emal,callback:function(t){e.$set(e.change,"emal",t)},expression:"change.emal"}})],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeClick}},[e._v("修改")])],1)]),e._v(" "),s("el-dialog",{attrs:{title:"权限",visible:e.universal.jurisdiction},on:{"update:visible":function(t){e.$set(e.universal,"jurisdiction",t)}}},[s("div",[s("el-checkbox-group",{staticClass:"checkboxMarginLeft",on:{change:e.handleCheckedCitiesChange},model:{value:e.checkbox.checkedCities,callback:function(t){e.$set(e.checkbox,"checkedCities",t)},expression:"checkbox.checkedCities"}},e._l(this.$store.state.activeName,function(t){return s("div",[s("el-checkbox",{key:t.classA.menuId,staticClass:"checkboxMarginTop",attrs:{label:t.classA.menuId},on:{change:function(s){e.allClick(t.classA.menuId)}}},[e._v(e._s(t.classA.menuName))]),s("br"),e._v(" "),e._l(t.classB,function(t){return s("el-checkbox",{key:t.menuId,staticClass:"checkboxMarginLeft",attrs:{label:t.menuId}},[e._v(e._s(t.menuName))])}),s("br"),s("br")],2)}))],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.jurisdiction=!1}}},[e._v("取消")]),e._v(" "),s("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.updataClick}},[e._v("保存")])],1)]),e._v(" "),s("div",{staticClass:"footer"},[s("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("消防队列表")])])])}]};var g=s("VU/8")(p,v,!1,function(e){s("GssJ")},"data-v-662d7fa8",null);t.default=g.exports}});