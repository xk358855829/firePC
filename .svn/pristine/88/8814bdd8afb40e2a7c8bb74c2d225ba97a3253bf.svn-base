webpackJsonp([28],{"8/WU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("woOf"),l=a.n(s),n=a("bOdI"),o=a.n(n),i=a("mw3O"),r=a.n(i),c=a("OMN4"),d=a.n(c),h={name:"equipmentList",data:function(){var e;return e={levelList:[],level:"0",add1:{weChatType:"",weChatFullName:"",weChatUsePassword:"",weChatUsePhone:"",weChatUseName:""},li:[],added:"",send:{deviceId:"",title:"",timeOut:"",qos:""},change:{title:"",desc:"",tags:"",lon:"",lat:"",authInfo:"",deviceId:""},status:"",universal:{add:!1,change:!1,look:!1,send:!1,allot:!1},tableData:[],con:{id:"",protocol:"",create_time:"",auth_info:"",title:"",desc:"",tags:"",lon:"",lat:"",dataid:"",unit:"",unit_symbol:""}},o()(e,"li",[]),o()(e,"add",!1),o()(e,"topic",!1),o()(e,"conGroup",!1),o()(e,"change",!1),o()(e,"send",!1),o()(e,"see",!1),o()(e,"changeGroups",!1),o()(e,"changeGrouping",{changeGrouping:"",conId:""}),o()(e,"step",0),o()(e,"seeStep",1),o()(e,"paging",{page:1,pageSize:10,total:0}),o()(e,"allot1",{deviceId:"",trafficCard:"",deviceType:"",deviceModel:"",deviceName:"",createTime:"",personnel:"",status:""}),o()(e,"search",{weChatUseName:"",Id:"",start:"",end:"",modelstyle:"",modelphoto:""}),e},mounted:function(){this.searchClick(),document.title=this.$route.meta.title,"123"==sessionStorage.getItem("dealer")&&(this.added=1)},methods:{hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e},next:function(){var e=this;0==this.step?d()({method:"post",url:e.$store.state.http+"/concode/conByCarBrand",data:r.a.stringify({conLocaid:e.addTo.list.conLocaid,carBrand:e.addTo.list.carBrand})}).then(function(t){if(0!=t.data.resCode)return e.$message.error("此定位器ID不存在"),e.addTo.list.conLocaid="",!1;e.step++>3&&(e.step=0,e.add=!1)}):e.step++>3&&(e.step=0,e.add=!1)},nextSee:function(){this.seeStep++>1&&(this.seeStep=1)},handleCurrentChange:function(e){},addClick:function(){if(this.add1.weChatUseName.length<5||this.add1.weChatUseName.length>12)return this.$message.error("用户账号的长度为5-12位"),!1;if(""==this.add1.weChatType)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatFullName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUsePassword)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUsePhone)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.add1.weChatUseName)return this.$message.error("带*的数据不能为空哦！"),!1;if(!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.add1.weChatUsePhone))return this.$message.error("手机号码格式有误"),!1;var e=this.add1,t=this;e.dealer=sessionStorage.getItem("dealer"),0==e.dealer&&(e.dealer=sessionStorage.getItem("orderDealers")),d()({method:"post",dataType:"jsonp",url:this.$store.state.http+"/wechatUser/add",data:r.a.stringify(e)}).then(function(e){localStorage.setItem("id",e.data.errMsg.split(":")[1]),0==e.data.resCode?(t.searchClick(),t.$message({message:"添加成功",type:"success"})):6==e.data.resCode&&t.$alert(e.data.result,"请勿重复添加",{confirmButtonText:"确定"})}),t.universal.add=!1,t.add1.weChatType="",t.add1.weChatFullName="",t.add1.weChatUsePassword="",t.add1.weChatUsePhone="",t.add1.weChatUseName=""},deleteChild:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d()({method:"post",url:t.$store.state.http+"/wechatUser/removeWechatDev",data:r.a.stringify({id:e.id})}).then(function(t){0==t.data.resCode?(a.changeGroupShow(e),a.$message({message:"删除成功",type:"success"})):a.$alert(t.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){d()({method:"post",url:t.$store.state.http+"/wechatUser/remove",data:r.a.stringify({id:e.id})}).then(function(e){0==e.data.resCode?(a.searchClick(),a.$message({message:"删除成功",type:"success"})):a.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeshow:function(e){this.universal.change=!0,this.change=l()({},e)},changeclick:function(e){if(""==this.change.weChatUseName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePhone)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatUsePassword)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatFullName)return this.$message.error("带*的数据不能为空哦！"),!1;if(""==this.change.weChatType)return this.$message.error("带*的数据不能为空哦！"),!1;if(!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.change.weChatUsePhone))return this.$message.error("手机号码格式有误"),!1;if(this.change.weChatUseName.length<5||this.change.weChatUseName.length>12)return this.$message.error("用户账号的长度为5-12位"),!1;var t=this,a=this.change;a.wechatUser=e.wechatUser,d()({method:"post",url:this.$store.state.http+"/wechatUser/update",data:r.a.stringify(a)}).then(function(e){0==e.data.resCode?(t.searchClick(),t.$message({message:"修改成功",type:"success"})):(t.searchClick(),t.$message({message:"修改失败",type:"error"}))}),this.universal.change=!1},order:function(e){this.universal.send=!0,this.send=e},allotchange:function(e){if(void 0==this.allot1.weChatUseNames)return this.$message.error("带*的数据不能为空哦！"),!1;var t=this,a={deviceId:t.allot1.weChatUseNames,weChatUsePhone:e.weChatUsePhone};d()({method:"post",url:this.$store.state.http+"/wechatUser/addWechatDev",data:r.a.stringify(a)}).then(function(e){t.universal.allot=!1,t.allot1.weChatUseNames="",0==e.data.resCode?(t.searchClick(),t.$message({message:"分配成功",type:"success"})):1==e.data.resCode&&t.$message({message:"请勿重复添加或添加有效设备",type:"error"})})},allot:function(e){this.universal.allot=!0,this.allot1=e;e.weChatUsePhone},changeGroupShow:function(e){this.look=e,this.universal.look=!0;var t=this,a={weChatUsePhone:e.weChatUsePhone};sessionStorage.setItem("weChatUsePhone",e.weChatUsePhone),d()({method:"post",url:this.$store.state.http+"/wechatUser/findDevbyUser",data:r.a.stringify(a)}).then(function(e){t.li=e.data.s})},searchClick:function(){var e={pageNum:this.paging.page,pageSize:this.paging.pageSize,dealer:sessionStorage.getItem("dealer")};0==e.dealer&&(e.dealer=sessionStorage.getItem("orderDealers")),e.weChatType=this.search.modelstyle,e.userId=sessionStorage.getItem("userId"),e.weChatUsePhone=this.search.modelphoto;var t=this;t.tableData=[],d()({method:"post",url:this.$store.state.http+"/wechatUser/find",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.tableData=e.data.content,t.paging.total=e.data.total):(t.tableData=[],t.paging.total=0)})},changeGroup:function(){var e=this.add1,t=this;d()({method:"post",url:this.$store.state.http+"/devices/ModifyDevices",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.searchClick(),t.$message({message:"修改成功",type:"success"})):t.$alert(e.data.result,"系统确认框",{confirmButtonText:"确定"}),t.changeGroups=!1})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"PSTlist"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("角色类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.modelstyle,callback:function(t){e.$set(e.search,"modelstyle",t)},expression:"search.modelstyle"}}),e._v(" "),a("span",[e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.modelphoto,callback:function(t){e.$set(e.search,"modelphoto",t)},expression:"search.modelphoto"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.universal.add=!0}}},[e._v("添加")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("账户名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatUseName,callback:function(t){e.$set(e.add1,"weChatUseName",t)},expression:"add1.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatUsePhone,callback:function(t){e.$set(e.add1,"weChatUsePhone",t)},expression:"add1.weChatUsePhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户密码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatUsePassword,callback:function(t){e.$set(e.add1,"weChatUsePassword",t)},expression:"add1.weChatUsePassword"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatFullName,callback:function(t){e.$set(e.add1,"weChatFullName",t)},expression:"add1.weChatFullName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("角色类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.add1.weChatType,callback:function(t){e.$set(e.add1,"weChatType",t)},expression:"add1.weChatType"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"分配",visible:e.universal.allot},on:{"update:visible":function(t){e.$set(e.universal,"allot",t)}}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("账户名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatFullName,callback:function(t){e.$set(e.allot1,"weChatFullName",t)},expression:"allot1.weChatFullName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUsePhone,callback:function(t){e.$set(e.allot1,"weChatUsePhone",t)},expression:"allot1.weChatUsePhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户密码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUsePassword,callback:function(t){e.$set(e.allot1,"weChatUsePassword",t)},expression:"allot1.weChatUsePassword"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("用户姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatUseName,callback:function(t){e.$set(e.allot1,"weChatUseName",t)},expression:"allot1.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("角色类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容",disabled:!0},model:{value:e.allot1.weChatType,callback:function(t){e.$set(e.allot1,"weChatType",t)},expression:"allot1.weChatType"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT spanClassTL"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.allot1.weChatUseNames,callback:function(t){e.$set(e.allot1,"weChatUseNames",t)},expression:"allot1.weChatUseNames"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.allot=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.allotchange(e.allot1)}}},[e._v("分配")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("账户名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUseName,callback:function(t){e.$set(e.change,"weChatUseName",t)},expression:"change.weChatUseName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("手机号码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUsePhone,callback:function(t){e.$set(e.change,"weChatUsePhone",t)},expression:"change.weChatUsePhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户密码：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatUsePassword,callback:function(t){e.$set(e.change,"weChatUsePassword",t)},expression:"change.weChatUsePassword"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("用户姓名：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatFullName,callback:function(t){e.$set(e.change,"weChatFullName",t)},expression:"change.weChatFullName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[a("span",{staticClass:"aKey"},[e._v("*")]),e._v("角色类型：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.change.weChatType,callback:function(t){e.$set(e.change,"weChatType",t)},expression:"change.weChatType"}}),a("br"),a("br")],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.changeclick(e.change)}}},[e._v("修改")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"查看",visible:e.universal.look},on:{"update:visible":function(t){e.$set(e.universal,"look",t)}}},[a("div",[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%",height:"400px",overflow:"auto"},attrs:{data:e.li}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.deviceId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.deviceId))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteChild(t.row)}}})])]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"账号名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.weChatUseName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.weChatUseName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"账号密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.weChatUsePassword))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.weChatUsePassword))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.weChatUsePhone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.weChatUsePhone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.weChatFullName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.weChatFullName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.weChatType))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.weChatType))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-edit",on:{click:function(a){e.changeshow(t.row)}}})]),e._v(" "),1==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"权限",placement:"top"}},[a("i",{staticClass:"icon-unclick el-icon-menu"})]):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"权限",placement:"top"}},[a("i",{staticClass:"icon-menu el-icon-menu",on:{click:function(a){e.allot(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row)}}})]),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[a("i",{staticClass:"icon-See el-icon-search",on:{click:function(a){e.changeGroupShow(t.row)}}})])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("个人微信分配")])])])}]};var p=a("VU/8")(h,u,!1,function(e){a("a8Gu")},"data-v-19037f13",null);t.default=p.exports},a8Gu:function(e,t){}});