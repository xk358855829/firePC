webpackJsonp([17],{SJ5b:function(e,t){},TsJk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mw3O"),r=a.n(s),l=a("OMN4"),o=a.n(l),i={name:"pageHome",data:function(){return{universal:{add:!1,change:!1},paging:{page:1,pageSize:5,total:0},pagingS:{page:1,pageSize:5,total:0},add:{repFauCode:0,repPhone:"",repName:"",repTypeCode:"",repAddress:"",repOpin:"",repAboutDate:""},search:{masterName:"",masterPhone:""},searchS:{masterName:"",masterPhone:""},tableData:[],tableDataS:[],options:{}}},mounted:function(){document.title=this.$route.meta.title,this.searchClick();var e=this;o()({method:"post",url:this.$store.state.http+"/repair/selByfauCode"}).then(function(t){0==t.data.resCode&&(e.options=t.data.result,e.add.repFauCode=t.data.result[0].fauId)})},methods:{indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},radioChange:function(e){this.add={repPhone:e.masterPhone,repName:e.masterName,repTypeCode:e.conLocaId,repAddress:e.carSingle}},radioClick:function(){this.universal.add=!1},addClick:function(){var e=this.add,t=this;if(""==t.add.repPhone||""==t.add.repName)return t.$message.error("请先选择终端设备"),!1;o()({method:"post",url:this.$store.state.http+"/repair/add",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.$message({message:"保存成功",type:"success"}),t.$router.push("/pageHome/proProcess")):t.$message.error(e.data.result)})},searchClick:function(){var e={page:this.paging.page,pageSize:this.paging.pageSize};this.search.masterName&&(e.masterName=this.search.masterName),this.search.masterPhone&&(e.masterPhone=this.search.masterPhone);var t=this;o()({method:"post",url:this.$store.state.http+"/repair/list",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.paging.total=e.data.count,t.tableData=e.data.result):t.tableData=[]})},searchSClick:function(){this.universal.change=!0;var e={page:this.pagingS.page,pageSize:this.pagingS.pageSize,repTypeCode:this.add.repTypeCode};this.searchS.repName&&(e.repName=this.searchS.repName),this.searchS.masterPhone&&(e.repPhone=this.searchS.repPhone);var t=this;o()({method:"post",url:this.$store.state.http+"/repair/selectByCode",data:r.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.pagingS.total=e.data.count,t.tableDataS=e.data.result):t.tableDataS=[]})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Repair"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{attrs:{type:"success"},on:{click:e.searchSClick}},[e._v("设备故障历史记录")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.universal.add=!0}}},[e._v("选择终端用户以及设备")]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.addClick}},[e._v("保存")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("span",{staticClass:"spanClassT"},[e._v("预留手机号：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.repPhone,callback:function(t){e.$set(e.add,"repPhone",t)},expression:"add.repPhone"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("用户名：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.repName,callback:function(t){e.$set(e.add,"repName",t)},expression:"add.repName"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("故障编号 ：")]),e._v(" "),a("el-select",{staticClass:"oyInput",attrs:{placeholder:"请选择"},model:{value:e.add.repFauCode,callback:function(t){e.$set(e.add,"repFauCode",t)},expression:"add.repFauCode"}},e._l(e.options,function(e){return a("el-option",{key:e.fauId,attrs:{label:e.fauCode,value:e.fauId}})})),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("投诉或建议：")]),e._v(" "),a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!1,rows:5,type:"textarea",clearable:"",placeholder:"请输入内容"},model:{value:e.add.repOpin,callback:function(t){e.$set(e.add,"repOpin",t)},expression:"add.repOpin"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("设备ID：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.repTypeCode,callback:function(t){e.$set(e.add,"repTypeCode",t)},expression:"add.repTypeCode"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("预约时间：")]),e._v(" "),a("el-date-picker",{staticClass:"time",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择日期时间"},model:{value:e.add.repAboutDate,callback:function(t){e.$set(e.add,"repAboutDate",t)},expression:"add.repAboutDate"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClassT"},[e._v("所属地区：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.repAddress,callback:function(t){e.$set(e.add,"repAddress",t)},expression:"add.repAddress"}}),a("br"),a("br")],1),e._v(" "),a("el-dialog",{attrs:{title:"设备故障历史记录",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",{staticClass:"select",staticStyle:{"border-bottom":"1px solid #CCCCCC","padding-bottom":"10px"}},[a("span",[e._v("用户名称：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.searchS.repName,callback:function(t){e.$set(e.searchS,"repName",t)},expression:"searchS.repName"}}),e._v(" "),a("span",[e._v("手机号 ：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.searchS.repPhone,callback:function(t){e.$set(e.searchS,"repPhone",t)},expression:"searchS.repPhone"}}),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchSClick}},[e._v("查询")])],1),e._v(" "),a("div",[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataS}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户名\t",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repPhone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repPhone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维修时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repRepairDate))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repRepairDate))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"来源",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[1==t.row.epFaultName?a("p",{staticClass:"TsMaxWidth"},[e._v("平台")]):a("p",{staticClass:"TsMaxWidth"},[e._v("微信")]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[1==t.row.epFaultName?a("div",{staticClass:"overflowHide"},[e._v("平台")]):a("div",{staticClass:"overflowHide"},[e._v("微信")])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"故障名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.repFaultName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.repFaultName))])])])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialogPage"},[a("el-pagination",{attrs:{background:"","current-page":e.pagingS.page,"page-sizes":[3,4,5,6,7],"page-size":e.pagingS.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.pagingS.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.pagingS,"page",t)}}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.change=!1}}},[e._v("取消")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"选择终端用户以及设备",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",{staticClass:"select",staticStyle:{"border-bottom":"1px solid #CCCCCC","padding-bottom":"10px"}},[a("span",[e._v("用户名称：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.masterName,callback:function(t){e.$set(e.search,"masterName",t)},expression:"search.masterName"}}),e._v(" "),a("span",[e._v("手机号 ：")]),e._v(" "),a("el-input",{staticClass:"oyInput",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.masterPhone,callback:function(t){e.$set(e.search,"masterPhone",t)},expression:"search.masterPhone"}}),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"",label:"选择",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.conId},on:{change:function(a){e.radioChange(t.row)}},model:{value:e.universal.radio,callback:function(t){e.$set(e.universal,"radio",t)},expression:"universal.radio"}},[e._v("单选")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.conLocaId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.conLocaId))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用户名称",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.masterName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.masterName))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.masterPhone))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.masterPhone))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"终端型号",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.positionerType))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.positionerType))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"安装单位地址 ",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.carSingle))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.carSingle))])])])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"dialogPage"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[3,4,5,6,7],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1,e.add={}}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.radioClick}},[e._v("选择")])],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("400报修")])])])}]};var c=a("VU/8")(i,n,!1,function(e){a("SJ5b")},"data-v-645c6a7b",null);t.default=c.exports}});