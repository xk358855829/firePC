webpackJsonp([26],{"+7C6":function(e,t){},dJ0s:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),l=a.n(s),r=a("woOf"),i=a.n(r),n=a("mw3O"),d=a.n(n),o=a("OMN4"),u=a.n(o),c={name:"equipmentList",data:function(){return{obj:[],numw:[],numvalue:[],universal:{add:!1,change:!1},paging:{page:1,pageSize:10,total:0},tableData:[],search:{devId:"",fauMode:"",devParaSn:""},add:{fauMode:"",fauName:"",fauSolve:"",fauCode:"",devId:""},change:{fauId:"",fauMode:"",fauName:"",fauSolve:"",fauCode:"",devId:""},options:[{id:0,type:"未选择"},{id:1,type:"设备倾倒"},{id:2,type:"应急开关破坏"},{id:3,type:"设备受到撞击"},{id:4,type:"非法开启"},{id:5,type:"电机控制异常"},{id:6,type:"设备漏水"},{id:7,type:"温度异常"},{id:8,type:"刷卡异常"},{id:9,type:"压力异常"}]}},mounted:function(){document.title=this.$route.meta.title,this.$route.query.mouse&&(this.search.devId=this.$route.query.mouse),this.searchClick()},methods:{mapreplace:function(e){this.$router.push({path:"/pageHome/Edistribution",query:{mouse:e.devParaSn}})},hideclick:function(){this.universal.change=!1},indexMethod:function(e){return e+(this.paging.page-1)*this.paging.pageSize+1},handleSizeChange:function(e){this.paging.pageSize=e,this.searchClick()},handleCurrentChange:function(e){this.searchClick()},addClick:function(){var e=this.add,t=this;u()({method:"post",url:this.$store.state.http+"/fault/add",data:d.a.stringify(e)}).then(function(e){0==e.data.resCode?t.searchClick():t.$message({message:"添加失败",type:"error"})}),t.universal.add=!1},deleteClick:function(e){var t=this,a=this;this.$confirm("此操作将永久删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){u()({method:"post",url:t.$store.state.http+"/equipment/delById",data:d.a.stringify({fauId:e.fauId})}).then(function(e){0==e.data.resCode?a.searchClick():a.$message({message:"删除失败",type:"error"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},changeShow:function(e){this.universal.change=!0,this.change=i()({},e)},changeClick:function(){var e=this.change;delete e.date;var t=this;u()({method:"post",url:this.$store.state.http+"/fault/update",data:d.a.stringify(e)}).then(function(e){0==e.data.resCode?(t.$message({message:"修改成功",type:"success"}),t.searchClick()):t.$message({message:"修改失败",type:"error"})}),t.universal.change=!1},searchClick:function(){var e=this,t={pageNum:1,pageSize:1e7,userId:"331fa66faa314260a2d557c65e3e884b"};0==sessionStorage.getItem("dealer")?t.dealer=sessionStorage.getItem("orderDealers"):t.dealer=sessionStorage.getItem("dealer"),u()({method:"post",url:e.$store.state.http+"/Snclass/find",data:d.a.stringify(t)}).then(function(t){if(0==t.data.resCode){var a={page:e.paging.page,pageSize:e.paging.pageSize};a.userId=sessionStorage.getItem("userId"),e.search.devId&&(a.devId=e.search.devId),e.search.fauMode&&(a.fauCode=e.options[e.search.fauMode].type),0==sessionStorage.getItem("dealer")?a.dealer=sessionStorage.getItem("orderDealers"):a.dealer=sessionStorage.getItem("dealer"),e.tableData=[],u()({method:"post",url:e.$store.state.http+"/equipment/list",data:d.a.stringify(a)}).then(function(a){if(0==a.data.resCode){for(var s=0;s<a.data.results.length;s++){a.data.results[s].datatime=e.common.timeToDate(l()(a.data.results[s].datatime.time).slice(0,10)),a.data.results[s].date=e.common.timeToDate(l()(a.data.results[s].date.time).slice(0,10));for(var r=0;r<t.data.result.length;r++)a.data.results[s].devId==t.data.result[r].deviceId&&(a.data.results[s].devParaSn=t.data.result[r].devParaSn);"1"==a.data.results[s].fault_destruction?a.data.results[s].fault_destruction="应急开关破坏":a.data.results[s].fault_destruction="","1"==a.data.results[s].fault_hit?a.data.results[s].fault_hit="设备受到撞击":a.data.results[s].fault_hit="","1"==a.data.results[s].fault_opening?a.data.results[s].fault_opening="非法开启":a.data.results[s].fault_opening="","1"==a.data.results[s].fault_abnormal?a.data.results[s].fault_abnormal="电机控制异常":a.data.results[s].fault_abnormal="","1"==a.data.results[s].fault_leakage?a.data.results[s].fault_leakage="设备漏水":a.data.results[s].fault_leakage="","1"==a.data.results[s].fault_temperature?a.data.results[s].fault_temperature="温度异常":a.data.results[s].fault_temperature="","1"==a.data.results[s].fault_pay?a.data.results[s].fault_pay="刷卡异常":a.data.results[s].fault_pay="","1"==a.data.results[s].fault_pressure?a.data.results[s].fault_pressure="压力异常":a.data.results[s].fault_pressure="","1"==a.data.results[s].fauCode?a.data.results[s].fauCode="设备倾倒":a.data.results[s].fauCode="",a.data.results[s].fauMode=a.data.results[s].fault_destruction+" "+a.data.results[s].fault_hit+" "+a.data.results[s].fault_opening+" "+a.data.results[s].fault_abnormal+" "+a.data.results[s].fault_leakage+" "+a.data.results[s].fault_temperature+" "+a.data.results[s].fault_pay+" "+a.data.results[s].fault_pressure+" "+a.data.results[s].fauCode}e.paging.total=a.data.count,e.tableData=a.data.results}else e.tableData=[]})}})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"faultList"}},[e._m(0),e._v(" "),a("div",{staticClass:"select"},[a("span",[e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.devId,callback:function(t){e.$set(e.search,"devId",t)},expression:"search.devId"}}),e._v(" "),a("span",[e._v("设备编号：")]),e._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入内容"},model:{value:e.search.devParaSn,callback:function(t){e.$set(e.search,"devParaSn",t)},expression:"search.devParaSn"}})],1),e._v(" "),a("div",{staticClass:"select"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success",icon:"el-icon-search"},on:{click:e.searchClick}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"Content"},[a("el-table",{staticClass:"oyTable",staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"设备ID",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.devId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.devId))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"设备编号",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.devParaSn))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.devParaSn))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"故障类型",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.fauMode))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.fauMode))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最早时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.date))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.date))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最新时间",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",{staticClass:"TsMaxWidth"},[e._v(e._s(t.row.datatime))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"overflowHide"},[e._v(e._s(t.row.datatime))])])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"地图",placement:"top"}},[a("i",{staticClass:"icon-change el-icon-location-outline",on:{click:function(a){e.mapreplace(t.row)}}})]),e._v(" "),1==t.row.roleId?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-unclick el-icon-delete"})]):a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("i",{staticClass:"icon-delete el-icon-delete",on:{click:function(a){e.deleteClick(t.row)}}})])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.universal.add},on:{"update:visible":function(t){e.$set(e.universal,"add",t)}}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("设备ID：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.devId,callback:function(t){e.$set(e.add,"devId",t)},expression:"add.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("设备型号：")]),e._v(" "),a("el-input",{attrs:{disabled:!1,clearable:"",placeholder:"请输入内容"},model:{value:e.add.fauMode,callback:function(t){e.$set(e.add,"fauMode",t)},expression:"add.fauMode"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("解决方法：")]),e._v(" "),a("el-input",{staticClass:"textareaWidth",attrs:{disabled:!1,type:"textarea",rows:5,clearable:"",placeholder:"请输入内容"},model:{value:e.add.fauSolve,callback:function(t){e.$set(e.add,"fauSolve",t)},expression:"add.fauSolve"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:function(t){e.universal.add=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.addClick}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.universal.change},on:{"update:visible":function(t){e.$set(e.universal,"change",t)}}},[a("div",[a("span",{staticClass:"spanClass"},[e._v("设备型号：")]),e._v(" "),a("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.devId,callback:function(t){e.$set(e.change,"devId",t)},expression:"change.devId"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("故障类型：")]),e._v(" "),a("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入内容"},model:{value:e.change.fauMode,callback:function(t){e.$set(e.change,"fauMode",t)},expression:"change.fauMode"}}),a("br"),a("br"),e._v(" "),a("span",{staticClass:"spanClass"},[e._v("解决方法：")]),e._v(" "),a("el-input",{staticClass:"textareaWidth",attrs:{disabled:!1,type:"textarea",rows:5,clearable:"",placeholder:"请输入内容"},model:{value:e.change.fauSolve,callback:function(t){e.$set(e.change,"fauSolve",t)},expression:"change.fauSolve"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.hideclick}},[e._v("取消")]),e._v(" "),a("el-button",{staticClass:"oyButton",attrs:{type:"success"},on:{click:e.changeClick}},[e._v("修改")])],1)]),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","current-page":e.paging.page,"page-sizes":[1,2,3,10,11,12],"page-size":e.paging.pageSize,layout:"sizes, prev, pager, next, jumper,total",total:e.paging.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange,"update:currentPage":function(t){e.$set(e.paging,"page",t)}}})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"headerTitle"},[t("span",[this._v("故障统计")])])])}]};var f=a("VU/8")(c,p,!1,function(e){a("+7C6")},"data-v-2f75c1ff",null);t.default=f.exports}});